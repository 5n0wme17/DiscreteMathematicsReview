# Hulec05 - 函数与序列

## 函数类型回顾

### 单射（一对一）函数
函数f称为一对一或单射，当且仅当对于定义域中的所有x,y，f(x)=f(y)蕴含x=y。在这种情况下，f称为单射。

**替代定义**: 函数是一对一的当且仅当x≠y时f(x)≠f(y)。（逆否命题！）

### 单射函数示例
**示例1**: A = {1,2,3}, B = {a,b,c}
定义f为1↦c, 2↦a, 3↦c。f是一对一吗？

**示例2**: 设g: Z→Z，其中g(x)=2x-1。g是一对一吗？

### 满射（到上）函数
函数f称为到上或满射，当且仅当对于每个b∈B，存在元素a∈A使得f(a)=b。在这种情况下，f称为满射。

**替代定义**: 函数是到上当且仅当所有陪域元素都被覆盖(f(A)=B)。

### 满射函数示例
**示例1**: A = {1,2,3}, B = {a,b,c}
定义f为1↦c, 2↦a, 3↦c。f是到上吗？

**示例2**: 设A = {0,1,...,9}, B = {0,1,2}
定义h: A→B为h(x)=x mod 3。h是到上吗？

### 双射函数（一一对应）
函数f称为双射，当且仅当它既是一对一又是到上。

### 双射函数示例
**示例1**: A = {1,2,3}, B = {a,b,c}
定义f为1↦c, 2↦a, 3↦b。f是双射吗？

**示例2**: 定义g: N→N为g(x)=⌊x/2⌋（向下取整函数）。g是双射吗？

## 总结

假设f: A→B。

| 要证明f是单射 | 要证明f不是单射 |
|---------------|-----------------|
| 证明如果f(x)=f(y)对所有x,y∈A，则x=y | 找到特定元素x,y∈A使得x≠y且f(x)=f(y) |

| 要证明f是满射 | 要证明f不是满射 |
|---------------|-----------------|
| 考虑任意元素y∈B并找到元素x∈A使得f(x)=y | 找到特定元素y∈B使得对所有x∈A，f(x)≠y |

## 重要注记

**证明**: "对于函数f: A→B，其中|A|=|B|=n，f是一对一的当且仅当f是到上的。"

**证明**:
- **仅当部分**: 假设f是一对一的。设{x₁,x₂,...,xₙ}是A的元素。那么f(xᵢ)≠f(xⱼ)对于i≠j。因此，|f(A)| = |{f(x₁),...,f(xₙ)}| = n。但|B|=n且f(A)⊆B。因此，f(A)=B。
- **当部分**: 假设f是到上的。设A={x₁,x₂,...,xₙ}是A元素的列表。假设对于某个i≠j，f(xᵢ)=f(xⱼ)。那么，|{f(x₁),...,f(xₙ)}| ≤ n-1。但|f(A)|=|B|=n，矛盾。

## 双射函数

"对于从A到自身的函数f，f是一对一的当且仅当f是到上的，其中A是无限的。"这是真的吗？

**反例**: f: Z→Z，其中f(x)=2x。
f是一对一但不是到上的
- 1↦2
- 2↦4
- 3↦6
3没有原像。

## 实数上的两个函数

设f₁和f₂是从A到R的函数。那么f₁+f₂和f₁f₂也是从A到R的函数，对所有x∈A定义为：
(f₁+f₂)(x) = f₁(x) + f₂(x)
(f₁f₂)(x) = f₁(x)f₂(x)

**示例**: f₁ = x-1 且 f₂ = x³+1
那么(f₁+f₂)(x) = x³+x
(f₁f₂)(x) = x⁴ - x³ + x - 1

## 逆函数

设f: A→B是双射。f的逆是将属于B的元素b分配给A中唯一元素a的函数，使得f(a)=b，记作f⁻¹。因此，f⁻¹(b)=a当f(a)=b。在这种情况下，f称为可逆的。

### 逆函数注记
如果f不是双射，就不可能定义f的逆函数。为什么？

**假设f不是单射**: 逆不是函数：B的一个元素映射到A的两个不同元素

**假设f不是满射**: 逆不是函数：B的一个元素没有被分配给A的元素

### 逆函数示例
**示例1**: f: R→R，其中f(x)=2x-1。逆函数f⁻¹是什么？
f⁻¹(x) = (x+1)/2

**示例2**: f: Z→Z，其中f(x)=2x-1。f可逆吗？
不，因为f不是到上的。

## 函数的复合

设f是从B到C的函数，g是从A到B的函数。函数f和g的复合，记作f∘g，定义为(f∘g)(x) = f(g(x))。

### 函数复合示例
**示例1**: 设A = {1,2,3} 和 B = {a,b,c,d}。
g: A→A, f: A→B
1↦3, 1↦b
2↦1, 2↦a
3↦2, 3↦d

f∘g是什么？
f∘g: A→B
1↦d
2↦b
3↦a

**示例2**: 设f: Z→Z 和 g: Z→Z，其中f(x)=2x 且 g(x)=x²。
g∘f 和 f∘g 是什么？
g∘f: Z→Z, g∘f = 4x²
f∘g: Z→Z, f∘g = 2x²

**注意**: 通常，复合的顺序很重要。

### 复合函数的性质
假设f是从A到B的双射。那么f∘f⁻¹ = I_B 且 f⁻¹∘f = I_A，因为
(f⁻¹∘f)(a) = f⁻¹(f(a)) = f⁻¹(b) = a
(f∘f⁻¹)(b) = f(f⁻¹(b)) = f(a) = b

其中I_A, I_B分别表示集合A和B上的恒等函数。

## 一些重要函数

**向下取整函数**将实数x分配给小于或等于x的最大整数，记作⌊x⌋。

**向上取整函数**将实数x分配给大于或等于x的最小整数，记作⌈x⌉。

**示例1**: 证明或反驳：如果x是实数，则⌊2x⌋ = ⌊x⌋ + ⌊x + 1/2⌋。

**示例2**: 证明或反驳：对所有实数x和y，⌈x+y⌉ = ⌈x⌉ + ⌈y⌉。

**阶乘函数** f: N→Z⁺ 是前n个正整数的乘积，当n是非负整数时，记作f(n)=n!。

## 序列

序列是从整数子集（通常是集合{0,1,2,...}或{1,2,3,...}）到集合S的函数。我们使用符号aₙ表示整数n的像。（{aₙ}表示有序列表a₁,a₂,a₃,...）

### 序列示例
- aₙ = n²，其中n=1,2,3,...
- aₙ = (-1)ⁿ，其中n=0,1,2,...
- aₙ = 2ⁿ，其中n=0,1,2,...

**等差数列**是形如a, a+d, a+2d, a+3d, ..., a+nd, ...的序列，其中首项a和公差d是实数。

**示例**:
- aₙ = -1+4n，其中n=0,1,2,3,...

## 等比数列

**等比数列**是形如a, ar, ar², ..., arⁿ, ...的序列，其中首项a和公比r是实数。

**示例**:
- aₙ = (1/2)ⁿ，其中n=0,1,2,3,...

**问题**: 给定一个序列，如何找到生成该序列的规则？
8, 42, 226, 1232, 6646, 35362, 185868, ...

## 递归定义的序列

序列{aₙ}的第n个元素是根据序列的前几个元素和序列的初始元素递归定义的。

**示例**:
- aₙ = aₙ₋₁ + 2，假设a₀=1，对于n≥1
- fₙ = fₙ₋₁ + fₙ₋₂，对于n=2,3,4,...（斐波那契数列）

## 求和

序列项的求和是
∑ⱼ₌ₘⁿ aⱼ = aₘ + aₘ₊₁ + ··· + aₙ

变量j称为求和索引，字母j的选择是任意的。
- m是下限
- n是求和的上限

### 求和性质
∑ⱼ₌₁ⁿ (axⱼ + byⱼ) = a∑ⱼ₌₁ⁿ xⱼ + b∑ⱼ₌₁ⁿ yⱼ

∑ᵢ₌₁ᵐ ∑ⱼ₌₁ⁿ aᵢbⱼ = ∑ᵢ₌₁ᵐ aᵢ ∑ⱼ₌₁ⁿ bⱼ

### 特殊求和公式
等差数列a, a+d, a+2d, ..., a+nd的前n项和是
S = ∑ⱼ₌₀ⁿ (a+jd) = (n+1)a + d∑ⱼ₌₀ⁿ j = (n+1)a + d[n(n+1)/2]

等比数列a, ar, ar², ..., arᵏ的前n项和是
S = ∑ⱼ₌₀ⁿ (arʲ) = a∑ⱼ₌₀ⁿ rʲ = a[(rⁿ⁺¹ - 1)/(r - 1)]

### 示例
- S = ∑ⱼ₌₁⁵ (2+3j)
- S = ∑ⱼ₌₃⁵ (2+3j)
- S = ∑ᵢ₌₁⁴ ∑ⱼ₌₁² (2i - j)
- S = ∑ⱼ₌₀³ 2(5)ʲ
- S = ∑ᵢ₌₁⁴ ∑ⱼ₌₁³ ij

**答案**: 55, 42, 28, 312, 60

## 无穷级数

对于|x|<1，无穷等比级数可以用闭式形式计算。
∑ₖ₌₀∞ xᵏ = limₙ→∞ ∑ₖ₌₀ⁿ xᵏ = limₙ→∞ (xⁿ⁺¹ - 1)/(x - 1) = 1/(1 - x)

∑ₖ₌₀∞ kxᵏ⁻¹ = 1/(1 - x)²

## 一些有用的求和公式

## 集合的基数

**回顾**: 有限集的基数由集合中元素的数量定义。

如果A和B的元素之间存在一一对应关系，则集合A和B具有相同的基数。

如果存在从A到B的一对一函数，则A的基数小于或等于B的基数，记作|A|≤|B|。此外，当|A|≤|B|且A和B具有不同的基数时，我们说A的基数小于B的基数，记作|A|<|B|。

## 可数集

要么是有限的，要么与正整数集Z⁺具有相同基数的集合称为可数集。不是可数的集合称为不可数集。

**为什么这些被称为可数？**
- 集合的元素可以被枚举和列出。

## 希尔伯特大酒店

大酒店有可数无限个房间，每个房间都住着客人。我们总是可以在这家酒店容纳新客人。这怎么可能？

## 可数集示例

**示例1**: A = {0,2,4,6,...} - 偶数集合。它是可数的吗？

**使用定义**: 是否存在双射f: Z⁺→A？
定义函数f: x↦2x-2。这是双射！
- 一对一：为什么？如果2x-2=2y-2，那么x=y
- 到上：为什么？∀x∈A，(x+2)/2是Z⁺中的原像

**示例2** (定理): 整数集Z是可数的。

**解决方案**: 我们可以列出序列：0,1,-1,2,-2,3,-3,...或定义从Z⁺到Z的双射：
- 当n是偶数时：f(n)=n/2
- 当n是奇数时：f(n)=-(n-1)/2

**示例3** (定理): （正）有理数集是可数的。

**解决方案**: 构造列表：首先列出p/q，其中p+q=2，然后列出p+q=3的p/q，依此类推。
1, 1/2, 2, 3, 1/3, 1/4, 2/3, ...

## 不可数集

**定理**: 实数集R是不可数的。

**反证法证明**: 假设R是可数的。那么R的每个子集都是可数的（为什么？），特别是从0到1的区间是可数的。这意味着该集合的元素可以列为r₁, r₂, r₃, ...，其中
- r₁ = 0.d₁₁d₁₂d₁₃d₁₄···
- r₂ = 0.d₂₁d₂₂d₂₃d₂₄···
- r₃ = 0.d₃₁d₃₂d₃₃d₃₄···
所有dᵢⱼ∈{0,1,2,...,9}。

**证明继续**: 我们想证明并非所有在0和1之间的实数都在这个列表中。形成一个新数r=0.d₁d₂d₃d₄···，其中如果dᵢᵢ≠2则dᵢ=2，如果dᵢᵢ=2则dᵢ=3。

**证明完成**: 我们声称r与列表中的每个数都不同。每个展开是唯一的，如果我们排除无限9的字符串。r和rᵢ在第i个小数位上不同，对于所有i。这称为康托对角线论证。

## 幂集的不可数性

**定理**: 集合P(N)是不可数的。

**反证法证明**: 假设P(N)是可数的。这意味着该集合的元素可以列为S₀, S₁, S₂, ...，其中Sᵢ⊆N，并且每个Sᵢ可以唯一地由位串bᵢ₀bᵢ₁bᵢ₂...表示，其中如果j∈Sᵢ则bᵢⱼ=1，如果j∉Sᵢ则bᵢⱼ=0
- S₀ = b₀₀b₀₁b₀₂b₀₃···
- S₁ = b₁₀b₁₁b₁₂b₁₃···
- S₂ = b₂₀b₂₁b₂₂b₂₃···
...所有bᵢⱼ∈{0,1}。

**证明继续**: 形成一个新集合R=b₀b₁b₂b₃···，其中如果bᵢᵢ=1则bᵢ=0，如果bᵢᵢ=0则bᵢ=1。我们声称R与列表中的每个集合都不同。每个位串是唯一的，并且R和Rᵢ在第i位上不同，对于所有i。

## 施罗德-伯恩斯坦定理

**定理**: 如果A和B是满足|A|≤|B|和|B|≤|A|的集合，那么|A|=|B|。

换句话说，如果存在从A到B的一对一函数f和从B到A的一对一函数g，那么A和B之间存在一一对应关系。

**示例**: 证明|(0,1)| = |(0,1]|。
f(x)=x; g(x)=x/2

## 下节课内容
- 复杂性

## 相关知识点总结
- [[集合论相关内容]] - 集合论知识分块总结
- [[离散数学总览]] - 离散数学整体概述
